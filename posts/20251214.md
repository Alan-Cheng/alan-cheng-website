---
title: åˆ·é¡Œç´€éŒ„ - Surrounded Regions
cat: LeetCode
---

ä»Šå¤©æ°£æº«é™åˆ°12åº¦ï¼Œå†·åˆ°ä¸æƒ³å‡ºé–€åƒé£¯ä¹Ÿä¸æƒ³å»å¥èº«æˆ¿ã€‚ æ´—æ¾¡çš„æ™‚å€™çªç„¶æƒ³èµ·å¹¾å¤©å‰åœ¨æ¸…é‚çœ‹åˆ°çš„é•·é ¸æ—â‹¯â‹¯ä»–å€‘è„–å­ä¸Šé‚„æˆ´è‘—éŠ…ç’°ä¸æ˜¯è¶…å†°ï¼Ÿ

ä½†æ¸…é‚æ‡‰è©²ä¸æœƒé‚£éº¼å†·ï¼ˆï¼Ÿï¼‰

![](/posts-images/20251214/20251214.png)

- **é›£åº¦**ï¼šMedium
- **é¡Œç›®é€£çµ**ï¼šhttps://leetcode.com/problems/surrounded-regions

---

### æ€è€ƒéç¨‹

1. é¡Œç›®å…¶å¯¦å°±é¡ä¼¼åœæ£‹ï¼Œè¦æ±‚è¢« "X" åœèµ·ä¾†çš„ "O" è¦è®Šè¢«æ›¿æ›æˆ "X"
2. è¦–è¦ºè©±ä¾†èªªçš„è©±å°±æ˜¯ï¼š
```
é¡Œç›®ï¼š
X X X X
X O O X
X X O X
X O X X

åŸ·è¡Œå¾Œï¼š
X X X X
X X X X  <----- è¢« X åŒ…åœçš„å€åŸŸè¢«æ›¿æ›æ‰äº†
X X X X
X O X X
```
3. å› ç‚ºä»¥å‰åšéé¡ä¼¼çš„é¡Œç›®ï¼Œæ‰€ä»¥æƒ³åˆ°ç”¨ BFS çš„æ–¹æ³•å»è§£é€™é¡Œã€‚ è¨˜å¾—ç•¶æ™‚çš„é¡Œç›®æ˜¯é¡ä¼¼æ¨¡æ“¬ä¸€ç‰‡æµ·æ´‹ä¸­æœ‰å¹¾å€‹å­¤å³¶ï¼Œè¦æ‰¾å‡ºå­¤å³¶çš„ä½ç½®ï¼ˆï¼Ÿï¼‰
4. é€™é¡Œä¹Ÿæ˜¯é¡ä¼¼çš„é“ç†ï¼ŒBFS å¯ä»¥æ‰¾å‡ºæ¯å€‹ O æ‰€é€£é€šçš„å€å¡Š
5. ä½†é€™é¡Œæ„Ÿè¦ºå¾ˆé›£ï¼Œæ‰€ä»¥è·‘å»æ´—äº†å€‹æ¾¡ã€‚ æ´—æ¾¡ä¸æ„§æ˜¯äººé¡çš„éˆæ„Ÿæ³‰æºï¼Œé€†å‘æ€è€ƒçªç„¶æƒ³åˆ°ï¼š

    **æœƒè¢«ç¿»è½‰çš„ O å€åŸŸï¼Œä»£è¡¨é‚£å€‹å€åŸŸæ²’æœ‰ O é€£é€šåˆ°é‚Šç•Œä¸Š**
6. é€™æ¨£å°±æœ‰è§£äº†ï¼Œåªè¦æ‰¾å‡ºæ¯å€‹ O é€£é€šå€åŸŸï¼Œé€ä¸€æª¢æŸ¥æ¯å€‹å€åŸŸæœ‰æ²’æœ‰é€£é€šåˆ°é‚Šç•Œå°±å¯ä»¥äº†ï¼

### è¤‡é›œåº¦åˆ†æ

- **æ™‚é–“è¤‡é›œåº¦**ï¼š
> æ¯å€‹é»éƒ½è¦è¢«æª¢æŸ¥ä¸€æ¬¡ï¼Œæ‰€ä»¥æ˜¯ $O(m*n)$

- **ç©ºé–“è¤‡é›œåº¦**ï¼š
> ç”¨äº† visited ç´€éŒ„æ˜¯å¦æ‹œè¨ªéæ¯å€‹é»ã€Queue è·Ÿ record æœ€å·®æƒ…æ³ï¼ˆå…¨éƒ¨éƒ½æ˜¯Oï¼‰ä¸‹æœƒéœ€è¦è¨˜éŒ„æ‰€æœ‰é»ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ $O(m*n)$ã€‚

---

## ç¨‹å¼ç¢¼ï¼ˆPython è§£æ³•ï¼‰
```python
class Solution:
    def solve(self, board: List[List[str]]) -> None:
        if not board or not board[0]:
            return

        # é‚Šç•Œçš„é•·å¯¬
        m, n = len(board), len(board[0])
        visited = [[False] * n for _ in range(m)]

        # å› ç‚ºé‚Šç•Œä¸Šçš„é»ä¸ç”¨æª¢æŸ¥ï¼Œæ‰€ä»¥ç›´æ¥å…§ç¸® 1 å€‹å–®ä½
        for i in range(1, m - 1):
            for j in range(1, n - 1):
                # è‹¥é»æ˜¯ X æˆ–å·²ç¶“æ‰¾éï¼Œå°±ä¸ç”¨å†æª¢æŸ¥äº†
                if board[i][j] == "X" or visited[i][j]:
                    continue
                
                # ç”¨ä¾†ç´€éŒ„ O çš„é€£é€šå€åŸŸ
                record = []
                # BFS ç”¨çš„ Queue
                q = [(i, j)]
                visited[i][j] = True
                # æ˜¯å¦æ˜¯è¢«åŒ…åœçš„å°é–‰å€åŸŸ
                is_close = True

                while q:
                    x, y = q.pop(0)   # ğŸ‘ˆ ç›´æ¥ç”¨ä½ è¦çš„
                    record.append((x, y))

                    for dx, dy in [(-1,0), (1,0), (0,-1), (0,1)]:
                        nx, ny = x + dx, y + dy

                        if 0 <= nx < m and 0 <= ny < n:
                            if board[nx][ny] == "O":
                                # åªæœ‰ O åœ¨é‚Šç•Œæ‰ä»£è¡¨ä¸å°é–‰
                                if nx == 0 or nx == m - 1 or ny == 0 or ny == n - 1:
                                    is_close = False

                                if not visited[nx][ny]:
                                    visited[nx][ny] = True
                                    q.append((nx, ny))

                # è‹¥è¢«åˆ¤æ–·æ˜¯å°é–‰å€åŸŸï¼Œé‚£å°±ç¿»è½‰ O è®Šæˆ X
                if is_close:
                    for x, y in record:
                        board[x][y] = "X"
```

---

## å°çµ & åæ€

- GPT æä¾›äº†ä¸€å€‹æ›´ç›´è¦ºçš„è§£æ³•ï¼Œ**åªè¦å¾é‚Šç•Œä¸Šçš„ O å»æ¨™è¨˜ä¸éœ€è¦è¢«ç¿»è½‰çš„éƒ¨åˆ†**ï¼Œé€™æ¨£å°±ä¸éœ€è¦ç´€éŒ„ recordï¼Œç‰›é€¼ï¼š
```python
class Solution:
    def solve(self, board: list[list[str]]) -> None:
        if not board or not board[0]:
            return

        m, n = len(board), len(board[0])
        q = []

        # 1ï¸âƒ£ å¾é‚Šç•Œæ‰¾ Oï¼ŒåŠ å…¥ queue ä¸¦æ¨™è¨˜ç‚º #
        for i in range(m):
            for j in [0, n - 1]:  # å·¦å³é‚Šç•Œ
                if board[i][j] == "O":
                    q.append((i, j))
                    board[i][j] = "#"
        for j in range(n):
            for i in [0, m - 1]:  # ä¸Šä¸‹é‚Šç•Œ
                if board[i][j] == "O":
                    q.append((i, j))
                    board[i][j] = "#"

        # 2ï¸âƒ£ BFS æ¨™è¨˜æ‰€æœ‰èƒ½é€£åˆ°é‚Šç•Œçš„ O
        while q:
            x, y = q.pop(0)  # å¯ä»¥ç”¨ pop(0) æˆ– deque.popleft()
            for dx, dy in [(-1,0), (1,0), (0,-1), (0,1)]:
                nx, ny = x + dx, y + dy
                if 0 <= nx < m and 0 <= ny < n and board[nx][ny] == "O":
                    board[nx][ny] = "#"  # æ¨™è¨˜å®‰å…¨å€
                    q.append((nx, ny))

        # 3ï¸âƒ£ ç¿»è½‰çµæœï¼šå‰©ä¸‹çš„ O â†’ Xï¼Œ# â†’ O
        for i in range(m):
            for j in range(n):
                if board[i][j] == "O":
                    board[i][j] = "X"
                elif board[i][j] == "#":
                    board[i][j] = "O"
```

---