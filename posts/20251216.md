---
title: åˆ·é¡Œç´€éŒ„ - Sort List
cat: LeetCode
---

åªè¦åˆ·åˆ° Linked List çš„é¡Œç›®ï¼Œé ­æ•´å€‹å°±ç—›èµ·ä¾†ã€‚æŒ‡æ¨™ä¸²ä¾†ä¸²å»æå¾—æˆ‘å¥½äº‚å•Šã€‚

ä½†çŸ¥é“å¼±é»å°±è¦æƒ³è¾¦æ³•å…‹æœï¼Œé€™æ‰æ˜¯å¤§å¸«æ‡‰æœ‰çš„ç´ é¤Šã€‚

![åŠŸå¤«](https://memeprod.ap-south-1.linodeobjects.com/user-template/2d149d6b38185a908b127a1f9aba8d34.png)

- **é›£åº¦**: Medium

- **é¡Œç›®é€£çµ**: https://leetcode.com/problems/sort-list

---

### æ€è€ƒéç¨‹

1. é¡Œç›®æè¿°å…¶å¯¦å¾ˆç°¡å–®ï¼Œçµ¦ä¸€å€‹ Linked List å«æˆ‘å€‘æ’åºã€‚ é‚£ä¸å°±ä¾†å€‹ç°¡å–®çš„æ’å…¥æ’åºå°±æå®šäº†å—ï¼Ÿ

2. é †ä¾¿è¤‡ç¿’ä¸€ä¸‹æ’å…¥æ’åºï¼š 

    **å°‡è³‡æ–™åˆ†æˆå·²æ’åºèˆ‡æœªæ’åºå…©éƒ¨åˆ†ï¼Œæ¯æ¬¡å¾æœªæ’åºå€å–ä¸€å€‹å…ƒç´ ï¼Œåœ¨å·²æ’åºå€ä¸­ç”±å¾Œå‘å‰æƒæä¸¦æ‰¾åˆ°æ­£ç¢ºä½ç½®ï¼Œå°‡å…¶æ’å…¥ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ éƒ½æ’å¥½ã€‚**

3. é‚£å°±å¯¦ä½œä¸€ä¸‹ï¼š
    ```python
    class Solution:
    def sortList(self, head: Optional[ListNode]) -> Optional[ListNode]:
        # æ’åºå¥½çš„éƒ¨åˆ†
        sorted_list_head = ListNode()
        # å¾æœªæ’åºçš„éƒ¨åˆ†æŒ‘å‡ºè¦æ’å…¥çš„å…ƒç´ 
        cur = head

        while cur:
            # ç´€éŒ„ä¸‹ä¸€å€‹è¦æ’åºçš„å…ƒç´ ï¼Œä»¥å…æ–·æ‰
            nxt_node = cur.next

            # é€é prevï¼Œå¾å·²æ’åºçš„éˆçµä¸²åˆ—(sorted_list_head)ä¸­å¾é ­æ‰¾åˆ°å°¾
            prev = sorted_list_head

            # è¦æ‰¾åˆ°é©åˆæ’å…¥çš„ä½ç½®ï¼Œå°±ä¸æ–·æŠŠ prev å¾€å‰ç§»å‹•
            # ç›´åˆ° prev.next > cur.valï¼Œé‚£å°±ä»£è¡¨ cur æ‡‰è©²æ”¾åœ¨ prevçš„ä½ç½®
            while prev.next and prev.next.val < cur.val:
                prev = prev.next
            
            # æ­£ç¢ºæ¥ä¸Šå»
            cur.next = prev.next
            prev.next = cur

            # cur å¾€ä¸‹ä¸€å€‹ç§»å‹•
            cur = nxt_node

        return sorted_list_head.next
    ```
4. å®Œæˆå¾Œæœƒå–œæ TLEï¼Œäº‹æƒ…æœç„¶æ²’é€™éº¼ç°¡å–®ã€‚å¾€ä¸‹çœ‹åˆ° Follow up çš„æŒ‡ç¤ºæœƒç™¼ç¾ï¼Œé¡Œç›®è¦æ±‚æ™‚é–“è¤‡é›œåº¦æ˜¯ $O(n*logn)$ ã€ç©ºé–“è¤‡é›œåº¦ $O(1)$ ï¼Œä»£è¡¨æˆ‘å€‘ç”¨æ’å…¥æ’åºæ˜¯ä¸å°çš„ï¼

5. å¹³å‡æ™‚é–“è¤‡é›œåº¦æ˜¯ $O(n*logn)$ çš„æ’åºæ¼”ç®—æ³•ï¼Œæœ‰å¿«é€Ÿæ’åºã€åˆä½µæ’åºç­‰ã€‚ 

6. å¿«é€Ÿæ’åºæ‡‰è©²æ˜¯ä¸å¥½å¯¦ä½œï¼Œé€™ä¸åƒ Array ä¸€æ¨£å¯ä»¥ç”¨ index ç›´æ¥é †å–ã€‚ æŒ‡æ¨™ç§»å‹•æœƒå¾ˆè¤‡é›œ

7. å‰©ä¸‹åˆä½µæ’åºï¼Œä½†æ˜¯æˆ‘è¦æ€æ‰¾åˆ°ä¸­é–“é»ï¼Ÿï¼Ÿ GPT çµ¦å‡ºäº†é‡è¦è§£æ³•ï¼š **å¿«æ…¢æŒ‡æ¨™**  ï¼ï¼
8. ä¸éæˆ‘ä¹Ÿå¿˜äº†åˆä½µæ’åºæ˜¯æ€å¯¦ä½œçš„ï¼Œç›´æ¥è«‹ GPT çµ¦æˆ‘ç­”æ¡ˆå†ç´°ç´°ç ”ç©¶ ğŸš¬ ğŸ· å§....

### è¤‡é›œåº¦åˆ†æ

- **æ™‚é–“è¤‡é›œåº¦**ï¼š
> é¡Œç›®è¦æ±‚ $O(n*logn)$


- **ç©ºé–“è¤‡é›œåº¦**ï¼š
> $O(1)$

---

## ç¨‹å¼ç¢¼ï¼ˆPython è§£æ³•ï¼‰
```python
class Solution:
    def sortList(self, head: Optional[ListNode]) -> Optional[ListNode]:
        # ==========================
        # åŸºæœ¬æƒ…æ³ï¼šç©ºéˆè¡¨æˆ–åªæœ‰ä¸€å€‹ç¯€é»
        # ==========================
        if not head or not head.next:
            # ç©ºéˆè¡¨æˆ–å–®ç¯€é»å·²ç¶“æ’åºå¥½äº†ï¼Œç›´æ¥è¿”å›
            return head

        # ==========================
        # 1. æ‰¾ä¸­é»ï¼ˆå¿«æ…¢æŒ‡æ¨™ï¼‰
        # ==========================
        slow, fast = head, head.next  # fast = head.next è®“å·¦åŠé‚Šç¯€é»åå¤šï¼ˆå¶æ•¸æ™‚ï¼‰
        while fast and fast.next:
            slow = slow.next       # æ…¢æŒ‡æ¨™èµ°ä¸€æ­¥
            fast = fast.next.next  # å¿«æŒ‡æ¨™èµ°å…©æ­¥

        # slow æœ€å¾Œåœåœ¨å·¦åŠéƒ¨åˆ†çš„æœ€å¾Œä¸€å€‹ç¯€é»
        mid = slow.next     # å³åŠéƒ¨åˆ†çš„é ­ç¯€é»
        slow.next = None    # åˆ‡æ–·éˆè¡¨ï¼ŒæŠŠå·¦å³å…©éƒ¨åˆ†åˆ†é–‹

        # ==========================
        # 2. éè¿´æ’åºå·¦å³å…©åŠ
        # ==========================
        left = self.sortList(head)  # å°å·¦åŠéƒ¨åˆ†éè¿´æ’åº
        right = self.sortList(mid)  # å°å³åŠéƒ¨åˆ†éè¿´æ’åº

        # ==========================
        # 3. åˆä½µå…©å€‹å·²æ’åºéˆè¡¨
        # ==========================
        return self.merge(left, right)

    def merge(self, l1, l2):
        """
        åˆä½µå…©å€‹å·²ç¶“æ’åºå¥½çš„éˆè¡¨
        l1, l2: å·²æ’åºéˆè¡¨çš„é ­ç¯€é»
        è¿”å›: åˆä½µå¾Œçš„æ’åºéˆè¡¨é ­
        """
        dummy = ListNode(0)  # dummy ç¯€é»ï¼Œæ–¹ä¾¿æ“ä½œï¼Œæœ€çµ‚è¿”å› dummy.next
        cur = dummy           # cur æŒ‡å‘å·²æ’åºéˆè¡¨çš„å°¾éƒ¨ï¼Œç”¨ä¾†é€£æ¥ç¯€é»

        # éæ­·å…©å€‹éˆè¡¨ï¼ŒæŒ‰å¤§å°ä¾æ¬¡é€£æ¥
        while l1 and l2:
            if l1.val < l2.val:
                cur.next = l1  # é€£æ¥ l1 ç¯€é»
                l1 = l1.next   # l1 å¾€å¾Œç§»
            else:
                cur.next = l2  # é€£æ¥ l2 ç¯€é»
                l2 = l2.next   # l2 å¾€å¾Œç§»
            cur = cur.next     # cur ç§»å‹•åˆ°å°¾éƒ¨

        # å…¶ä¸­ä¸€å€‹éˆè¡¨å…ˆç©ºäº†ï¼Œå¦ä¸€å€‹éˆè¡¨å‰©ä¸‹çš„éƒ¨åˆ†ç›´æ¥æ¥ä¸Š
        cur.next = l1 or l2

        # è¿”å›åˆä½µå¾Œçš„çœŸæ­£é ­ç¯€é»
        return dummy.next
```

---

## å°çµ & åæ€

- é›–ç„¶ä¹‹å‰åœ¨æŸä¸€é¡Œæ‰¾éˆçµä¸²åˆ—æ˜¯å¦æœ‰è¿´åœˆçš„é¡Œç›®ä¸­ï¼Œæœ‰å­¸é**å¿«æ…¢æŒ‡æ¨™**ï¼Œä½†æ²’è¾¦æ³•èˆ‰ä¸€åä¸‰å°è‡´é€™é¡Œå¡æ­»äº†ã€‚

- å°æ–¼å¸¸è¦‹çš„æ’åºæ¼”ç®—æ³•é‚„ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œæ‰¾æ™‚é–“è¦è¤‡ç¿’ä¸€ä¸‹ã€‚

---